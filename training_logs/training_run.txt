
[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
No saved neuron state found, initializing random network.
  Creating new neural network...
  Created 9 neurons with distributed specialties
    Neuron 0: specialty=7.04, neighbors=2
    Neuron 1: specialty=2.55, neighbors=3
    Neuron 2: specialty=3.86, neighbors=4
    Neuron 3: specialty=1.21, neighbors=4
    Neuron 4: specialty=2.84, neighbors=4
    Neuron 5: specialty=1.93, neighbors=4
    Neuron 6: specialty=4.70, neighbors=4
    Neuron 7: specialty=7.44, neighbors=3
    Neuron 8: specialty=6.97, neighbors=2
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [217  83 224]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8784313725490196
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 414, Initial round: False
[Neuron (0,)] Membrane potential: 0.8082, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 0.8082 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.3731, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 0.6269 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.4593, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4764, Threshold: 0.3000
[Neuron (2,)] ACTIVATED! Membrane potential: 0.5236 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.2629, Threshold: 0.3000
[Neuron (3,)] Membrane potential: -0.5271, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 0.4729 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.2680, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.4924, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 0.5076 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.2385, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.7142, Threshold: 0.3000
[Neuron (5,)] NOT ACTIVATED. Membrane potential: 0.2858 <= Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.29 active=False
[Neuron (2,)] Membrane potential: 0.9782, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1991, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 0.8009 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.0181, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2246, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 0.7754 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.5607, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.8000, Threshold: 0.3000
[Neuron (8,)] NOT ACTIVATED. Membrane potential: 0.2000 <= Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.20 active=False
[Neuron (5,)] Membrane potential: 0.6113, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.78 active=True
[Neuron (4,)] Membrane potential: 0.0213, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.1840, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.56 active=True
[Neuron] (4,) membrane_potential=1.02 active=True
[Neuron (1,)] Membrane potential: 0.7473, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.4824, Threshold: 0.3000
[Neuron] (3,) membrane_potential=1.24 active=True
[Neuron (0,)] Membrane potential: 1.0272, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.9396, Threshold: 0.3000
[Neuron] (2,) membrane_potential=1.98 active=True
[Neuron (3,)] Membrane potential: 1.1394, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.75 active=True
[Neuron (2,)] Membrane potential: 1.8199, Threshold: 0.3000
[Neuron] (0,) membrane_potential=2.03 active=True
[Neuron (1,)] Membrane potential: 2.4157, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 2.4825, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.55)
[Neuron (3,)] Membrane potential: 1.8564, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.6726, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 3.0920, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 4.0920 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.0805, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.1573, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.4981, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.5275, Threshold: 0.3000
[Neuron] (5,) membrane_potential=4.09 active=True
[Cluster C1] Winner(s): [(4,)] (target_specialty=6, min_dist=3.16)
[Neuron (6,)] Membrane potential: 2.7929, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 2.2135, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.9774, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.9774 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 2.5456, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 3.3551, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.98 active=True
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=2.56)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=7.0379, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=3.8629, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 3: specialty=1.2102, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 5: specialty=1.9313, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 6: specialty=4.6997, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 7: specialty=3.0916, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 8: specialty=6.9664, status=ACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C1 (green): 1.38 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 4.92 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 2 messages (MP=2.42, winner=True)
[Neuron] (2,) sent 2 messages (MP=2.48, winner=False)
[Neuron] (3,) sent 4 messages (MP=2.50, winner=False)
[Neuron] (4,) sent 3 messages (MP=2.08, winner=True)
[Neuron] (5,) sent 3 messages (MP=4.09, winner=False)
[Neuron] (6,) sent 2 messages (MP=4.36, winner=False)
[Neuron] (7,) sent 2 messages (MP=3.55, winner=True)
[Neuron] (8,) sent 1 messages (MP=0.98, winner=False)
  Total messages sent: 19
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 2.2224, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.9141, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 3.2619, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.8992, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 7.0379->1.0000 [-6.0379]
  Weight (before->after) [Δ]: 0.6517->0.5539 [-0.0978]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0601
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.7014->0.5962 [-0.1052]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0313
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 3.8629->1.0000 [-2.8629]
  Weight (before->after) [Δ]: 0.4774->0.4058 [-0.0716]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0659
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.2132->1.0000 [-1.2132]
  Weight (before->after) [Δ]: 0.5073->0.4312 [-0.0761]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0163
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0994->2.1247 [+0.0253]
  Weight (before->after) [Δ]: 0.7020->0.5967 [-0.1053]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0753
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.8795->1.0000 [-1.8795]
  Weight (before->after) [Δ]: 0.6980->0.5933 [-0.1047]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0763
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 5.6914->1.0000 [-4.6914]
  Weight (before->after) [Δ]: 0.4283->0.3770 [-0.0513]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0249
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 4.4695->4.4625 [-0.0071]
  Weight (before->after) [Δ]: 0.5505->0.4679 [-0.0826]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0429
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 7.6178->7.6142 [-0.0036]
  Weight (before->after) [Δ]: 0.8696->0.7391 [-0.1304]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0464
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.03
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.22
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.48

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '2.12', '1.00']
  Target: green (specialty 6.5) | Current Mean: 1.37
  Labels: ['Specialty_1.00', 'Specialty_2.12', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.50
    Neuron (4,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.12 | MP=2.16
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=4.09

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '4.46', '7.61']
  Target: blue (specialty 10.0) | Current Mean: 4.36
  Labels: ['Specialty_1.00', 'Specialty_4.46', 'Specialty_7.61']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=4.36
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=4.46 | MP=3.76
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=7.61 | MP=0.90

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.483208248389192, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.9943718670006454, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 6.369240982557291, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.2446, variance: 4.7845
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [239  74 202]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9372549019607843
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 416, Initial round: False
[Neuron (0,)] Membrane potential: 0.8623, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.8623, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.8623, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.8623, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.0623 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.6061, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.2209, Threshold: 0.3000
[Neuron (4,)] NOT ACTIVATED. Membrane potential: 0.1791 <= Threshold: 0.3000
[Neuron] (4,) membrane_potential=0.18 active=False
[Neuron (1,)] Membrane potential: 0.4849, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2454, Threshold: 0.3000
[Neuron] (3,) membrane_potential=1.06 active=True
[Neuron (4,)] Membrane potential: 1.0270, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8665, Threshold: 0.3000
[Cluster C1] Winner(s): [(4,)] (target_specialty=6, min_dist=3.88)
[Neuron (6,)] Membrane potential: 0.8623, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.3623 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8054, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1794, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 0.4206 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.0913, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.6418, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8189, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.42 active=True
[Neuron (4,)] Membrane potential: 0.5756, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.0229, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.69 active=True
[Neuron (7,)] Membrane potential: 1.2493, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.4966, Threshold: 0.3000
[Cluster C2] Winner(s): [(8,)] (target_specialty=10, min_dist=2.39)
[Controller] Winning cluster(s): ['C0'] (activation=3)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 4: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 5: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 6: specialty=9.7000, status=ACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 7: specialty=4.4625, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 8: specialty=3.2642, status=ACTIVE, guess=green, correct?=no, winner=True
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C1 (green): 3.90 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 5.81 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 2 messages (MP=0.86, winner=True)
[Neuron] (1,) sent 2 messages (MP=0.98, winner=True)
[Neuron] (2,) sent 3 messages (MP=0.86, winner=True)
[Neuron] (4,) sent 2 messages (MP=1.58, winner=True)
[Neuron] (5,) sent 1 messages (MP=1.42, winner=False)
[Neuron] (7,) sent 1 messages (MP=1.25, winner=False)
[Neuron] (8,) sent 1 messages (MP=2.16, winner=True)
  Total messages sent: 14
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.7933, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.9061, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.7876, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.4496, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.5560, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.9902, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4613->0.3921 [-0.0692]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0434
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.5215->0.4433 [-0.0782]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0130
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3672->0.3199 [-0.0473]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0863
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.1172->1.0000 [-8.1172]
  Weight (before->after) [Δ]: 0.4897->0.5631 [+0.0735]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0815
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.1864->2.1588 [-0.0276]
  Weight (before->after) [Δ]: 0.5898->0.5014 [-0.0885]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0224
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.0828->1.0000 [-1.0828]
  Weight (before->after) [Δ]: 0.6230->0.5295 [-0.0934]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0301
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 9.7031->9.6990 [-0.0042]
  Weight (before->after) [Δ]: 0.4643->0.5339 [+0.0696]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0542
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 5.5436->1.0000 [-4.5436]
  Weight (before->after) [Δ]: 0.4739->0.4111 [-0.0627]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0116
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 4.6829->4.5836 [-0.0993]
  Weight (before->after) [Δ]: 0.6453->0.5485 [-0.0968]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0493
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 6/9 neurons active (66.7%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.79
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.16
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.99

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '2.16', '1.00']
  Target: green (specialty 6.5) | Current Mean: 1.39
  Labels: ['Specialty_1.00', 'Specialty_2.16', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.06
    Neuron (4,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.16 | MP=1.78
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.42

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['9.70', '1.00', '4.58']
  Target: blue (specialty 10.0) | Current Mean: 5.09
  Labels: ['Specialty_9.70', 'Specialty_1.00', 'Specialty_4.58']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=9.70 | MP=1.56
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.25
    Neuron (8,): Winner=True | Goal:✗ | Target:10.0 | Specialty=4.58 | MP=2.49

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.3749100034611086, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.358894873674152, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.4935, variance: 7.7536
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [153 212   0]
[Step 2b] Goal for this run: detect_red
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8313725490196079
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 418, Initial round: False
[Neuron (0,)] Membrane potential: 0.7649, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 0.7649 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.2199, Threshold: 0.3000
[Neuron (1,)] NOT ACTIVATED. Membrane potential: 0.1801 <= Threshold: 0.3000
[Neuron] (1,) membrane_potential=0.18 active=False
[Neuron (2,)] Membrane potential: -0.1370, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2630 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.26 active=False
[Neuron] (0,) membrane_potential=0.76 active=True
[Neuron (1,)] Membrane potential: 0.9305, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.0068, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.7649, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.7649, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.0982 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.4930, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.3092, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.4908 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.7093, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.6095, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6882, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1183, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.49 active=True
[Neuron (2,)] Membrane potential: 0.7966, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.0526, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.21 active=True
[Neuron (5,)] Membrane potential: 1.2164, Threshold: 0.3000
[Cluster C1] Winner(s): [(4,)] (target_specialty=6, min_dist=3.84)
[Neuron (6,)] Membrane potential: 1.4266, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.1160, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.7649, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 1.2649 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.2296, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.7070, Threshold: 0.3000
[Neuron] (8,) membrane_potential=1.26 active=True
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=0.30)
[Controller] Winning cluster(s): ['C0'] (activation=3)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 1: specialty=18.4000, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 5: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
    Neuron 6: specialty=27.0990, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 7: specialty=9.7000, status=INACTIVE, guess=red, correct?=yes, winner=False
    Neuron 8: specialty=4.5836, status=INACTIVE, guess=blue, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.80 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 1.00 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 13.79 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.76, winner=True)
[Neuron] (2,) sent 3 messages (MP=1.80, winner=True)
[Neuron] (3,) sent 3 messages (MP=1.35, winner=False)
[Neuron] (4,) sent 3 messages (MP=1.21, winner=True)
[Neuron] (5,) sent 2 messages (MP=1.22, winner=False)
[Neuron] (6,) sent 1 messages (MP=2.46, winner=True)
[Neuron] (7,) sent 1 messages (MP=1.90, winner=False)
  Total messages sent: 16
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.7037, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.8561, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.6529, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.1125, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1191, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 2.2604, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.2976->1.2488 [-0.0488]
  Weight (before->after) [Δ]: 0.3701->0.3157 [-0.0544]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0012
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6122->0.7041 [+0.0918]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0158
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.3011->1.2550 [-0.0461]
  Weight (before->after) [Δ]: 0.2791->0.3000 [+0.0209]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0039
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.0358->1.0000 [-1.0358]
  Weight (before->after) [Δ]: 0.5477->0.4656 [-0.0822]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0345
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0800->1.9638 [-0.1162]
  Weight (before->after) [Δ]: 0.4697->0.4044 [-0.0652]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0662
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.0132->1.9304 [-0.0828]
  Weight (before->after) [Δ]: 0.4829->0.4105 [-0.0724]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0328
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.7507->0.8294 [+0.0787]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0193
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 9.8515->1.0000 [-8.8515]
  Weight (before->after) [Δ]: 0.4235->0.4870 [+0.0635]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0976
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 5.5880->1.0000 [-4.5880]
  Weight (before->after) [Δ]: 0.5290->0.4496 [-0.0793]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0570
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 6/9 neurons active (66.7%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.25', '10.00', '1.25']
  Target: red (specialty 2.5) | Current Mean: 4.17
  Labels: ['Specialty_1.25', 'Specialty_10.00', 'Specialty_1.25']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.25 | MP=0.70
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=0.86
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.25 | MP=1.90

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.96', '1.93']
  Target: green (specialty 6.5) | Current Mean: 1.63
  Labels: ['Specialty_1.00', 'Specialty_1.96', 'Specialty_1.93']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.35
    Neuron (4,): Winner=True | Goal:✗ | Target:6.5 | Specialty=1.96 | MP=1.11
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.93 | MP=1.12

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['10.00', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_10.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=2.86
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.90
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.26

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.3862832032888026, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 5.09419100850637, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.2664, variance: 13.0767
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [ 33  80 139]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.5450980392156862
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 420, Initial round: False
[Neuron (0,)] Membrane potential: 0.5015, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.5015, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 0.5015 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.3083, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.1297, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2703 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.27 active=False
[Neuron (3,)] Membrane potential: -0.3137, Threshold: 0.3000
[Neuron] (1,) membrane_potential=0.50 active=True
[Neuron (2,)] Membrane potential: 0.7502, Threshold: 0.3000
[Cluster C0] Winner(s): [(2,)] (target_specialty=2, min_dist=0.75)
[Neuron (3,)] Membrane potential: 0.5809, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 0.9809 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.5604, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1586, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.1008, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1644, Threshold: 0.3000
[Neuron] (3,) membrane_potential=0.98 active=True
[Neuron (4,)] Membrane potential: 0.5856, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.6570, Threshold: 0.3000
[Cluster C1] Winner(s): [(4,)] (target_specialty=6, min_dist=4.04)
[Neuron (6,)] Membrane potential: 0.5015, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.1015 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.7638, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1977, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 0.4023 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.6461, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.4041, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.9660, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.40 active=True
[Neuron (4,)] Membrane potential: 0.5184, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.5482, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.25 active=True
[Neuron (7,)] Membrane potential: 0.8716, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.9259, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.2488, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 1: specialty=18.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 5: specialty=1.9304, status=ACTIVE, guess=green, correct?=no, winner=False
    Neuron 6: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 7: specialty=9.7000, status=ACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.98 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 1.31 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 15.60 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.81, winner=False)
[Neuron] (2,) sent 3 messages (MP=1.56, winner=True)
[Neuron] (3,) sent 3 messages (MP=0.98, winner=False)
[Neuron] (4,) sent 3 messages (MP=0.92, winner=True)
[Neuron] (5,) sent 2 messages (MP=1.57, winner=False)
[Neuron] (6,) sent 2 messages (MP=1.25, winner=True)
[Neuron] (7,) sent 2 messages (MP=0.87, winner=False)
[Neuron] (8,) sent 2 messages (MP=2.93, winner=False)
  Total messages sent: 21
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (2,)] Membrane potential: 1.4356, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.8449, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.4407, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.1464, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8019, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.5744->1.0000 [-0.5744]
  Weight (before->after) [Δ]: 0.3485->0.3048 [-0.0437]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0636
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.8026->0.9107 [+0.1082]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0951
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.3129->1.3352 [+0.0223]
  Weight (before->after) [Δ]: 0.2608->0.3000 [+0.0392]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0723
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.0853->1.0000 [-1.0853]
  Weight (before->after) [Δ]: 0.4797->0.4077 [-0.0720]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0859
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0710->2.0390 [-0.0321]
  Weight (before->after) [Δ]: 0.4138->0.3665 [-0.0472]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0179
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.9337->2.9586 [+0.0249]
  Weight (before->after) [Δ]: 0.4220->0.3656 [-0.0563]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0749
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 10.0000->9.9616 [-0.0384]
  Weight (before->after) [Δ]: 1.1264->1.0000 [-0.1264]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0884
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 9.6769->9.7570 [+0.0801]
  Weight (before->after) [Δ]: 0.6155->0.6940 [+0.0785]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0301
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.7953->1.0000 [-8.7953]
  Weight (before->after) [Δ]: 0.5051->0.5809 [+0.0758]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0661
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.34']
  Target: red (specialty 2.5) | Current Mean: 1.11
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.34']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.81
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.10
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.34 | MP=1.69

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '2.04', '2.96']
  Target: green (specialty 6.5) | Current Mean: 2.00
  Labels: ['Specialty_1.00', 'Specialty_2.04', 'Specialty_2.96']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.98
    Neuron (4,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.04 | MP=1.24
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=2.96 | MP=2.04

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['9.96', '9.76', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 6.91
  Labels: ['Specialty_9.96', 'Specialty_9.76', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=9.96 | MP=1.15
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=9.76 | MP=0.80
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.93

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.1679289681759375, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.6313881127091874, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.3390, variance: 12.5315
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [185 153  55]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.7254901960784313
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 422, Initial round: False
[Neuron (0,)] Membrane potential: 0.6675, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.0008 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.4505, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.1512, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2488 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.25 active=False
[Neuron] (0,) membrane_potential=1.00 active=True
[Neuron (1,)] Membrane potential: 0.8663, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.8963, Threshold: 0.3000
[Cluster C0] Winner(s): [(2,)] (target_specialty=2, min_dist=0.66)
[Neuron (3,)] Membrane potential: 0.6675, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.6675, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.0675 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.4717, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2229, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.3771 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.7873, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.9253, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.4650, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2416, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.38 active=True
[Neuron (2,)] Membrane potential: 0.6734, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.4833, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.19 active=True
[Neuron (5,)] Membrane potential: 1.0144, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=3.04)
[Neuron (6,)] Membrane potential: 0.5908, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.7519, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.6675, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 1.1675 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.5330, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.4489, Threshold: 0.3000
[Neuron] (8,) membrane_potential=1.17 active=True
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=0.04)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 2: specialty=18.7352, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 4: specialty=2.0390, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 5: specialty=20.3586, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 6: specialty=5.6116, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 7: specialty=18.4570, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.91 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 10.70 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 8.36 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.00, winner=False)
[Neuron] (1,) sent 1 messages (MP=1.53, winner=False)
[Neuron] (2,) sent 1 messages (MP=1.67, winner=True)
[Neuron] (3,) sent 2 messages (MP=0.86, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.01, winner=True)
[Neuron] (7,) sent 1 messages (MP=1.03, winner=False)
  Total messages sent: 8
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.9207, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.5395, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.9332, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.9650, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.3963->1.4211 [+0.0248]
  Weight (before->after) [Δ]: 0.3368->0.3000 [-0.0368]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0748
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.2994->1.0000 [-0.2994]
  Weight (before->after) [Δ]: 0.9531->0.8101 [-0.1430]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0879
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4060->0.4669 [+0.0609]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0955
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.1455->1.0000 [-8.1455]
  Weight (before->after) [Δ]: 0.4305->0.4951 [+0.0646]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0714
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.9771->1.0000 [-1.9771]
  Weight (before->after) [Δ]: 0.3515->0.3277 [-0.0239]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0480
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4383->0.5040 [+0.0657]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0714
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 6.2854->6.2874 [+0.0020]
  Weight (before->after) [Δ]: 0.8838->0.7512 [-0.1326]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0520
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.8115->0.8206 [+0.0091]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0900
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.3948->1.0000 [-1.3948]
  Weight (before->after) [Δ]: 0.5945->0.5053 [-0.0892]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0677
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 2/3 neurons (66.7%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.42', '1.00', '10.00']
  Target: red (specialty 2.5) | Current Mean: 4.14
  Labels: ['Specialty_1.42', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.42 | MP=0.92
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.53
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=2.04

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.86
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.19
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=0.93

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['6.29', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 2.76
  Labels: ['Specialty_6.29', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=6.29 | MP=1.56
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.03
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.17

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.1117194345912145, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.9991805810035057, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 6.906202946434558, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.6343, variance: 14.1866
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [171 149  50]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.6705882352941176
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 424, Initial round: False
[Neuron (0,)] Membrane potential: 0.6169, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.6169, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.1169 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.4373, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2017, Threshold: 0.3000
[Neuron (2,)] ACTIVATED! Membrane potential: 0.4650 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.6819, Threshold: 0.3000
[Neuron (3,)] Membrane potential: -0.5273, Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.7320, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1457, Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.46 active=True
[Neuron (3,)] Membrane potential: 0.0669, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.28 active=True
[Neuron (2,)] Membrane potential: 1.0447, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,)] (target_specialty=2, min_dist=0.58)
[Neuron (3,)] Membrane potential: 1.2305, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.8305 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.7595, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.6403, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7535, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2109, Threshold: 0.3000
[Neuron] (3,) membrane_potential=1.83 active=True
[Neuron (4,)] Membrane potential: 2.1260, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.7295, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 0.6169, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.2169 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.7693, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.3369, Threshold: 0.3000
[Neuron (7,)] NOT ACTIVATED. Membrane potential: 0.2631 <= Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.26 active=False
[Neuron (4,)] Membrane potential: 2.7068, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2686, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.22 active=True
[Neuron (7,)] Membrane potential: 0.8590, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.2898, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=3.71)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 1: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 2: specialty=18.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 5: specialty=5.6500, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 6: specialty=1.9374, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.90 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 1.31 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.40, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.75, winner=False)
[Neuron] (2,) sent 1 messages (MP=1.76, winner=False)
[Neuron] (3,) sent 1 messages (MP=1.83, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.27, winner=True)
[Neuron] (6,) sent 4 messages (MP=1.22, winner=True)
[Neuron] (7,) sent 2 messages (MP=0.86, winner=False)
[Neuron] (8,) sent 2 messages (MP=2.29, winner=False)
  Total messages sent: 14
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.2868, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1678, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.1196, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.7903, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.2240->1.2199 [-0.0040]
  Weight (before->after) [Δ]: 0.2620->0.3000 [+0.0380]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0460
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.3532->1.0000 [-0.3532]
  Weight (before->after) [Δ]: 0.8498->0.7223 [-0.1275]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0826
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.5042->0.5798 [+0.0756]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0973
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.5780->0.6647 [+0.0867]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0393
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3444->0.3081 [-0.0363]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0651
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 5.6500->5.5935 [-0.0565]
  Weight (before->after) [Δ]: 0.4803->0.4082 [-0.0720]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0065
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 3.6137->3.6590 [+0.0453]
  Weight (before->after) [Δ]: 0.6573->0.5587 [-0.0986]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0953
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.7574->2.7735 [+0.0162]
  Weight (before->after) [Δ]: 0.7858->0.6679 [-0.1179]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0662
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.8609->1.0000 [-1.8609]
  Weight (before->after) [Δ]: 0.5520->0.4692 [-0.0828]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0478
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.22', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.07
  Labels: ['Specialty_1.22', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.22 | MP=1.79
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.75
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.76

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '5.59']
  Target: green (specialty 6.5) | Current Mean: 2.53
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_5.59']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.83
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=3.71
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=5.59 | MP=1.57

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['3.66', '2.77', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 2.48
  Labels: ['Specialty_3.66', 'Specialty_2.77', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=3.66 | MP=1.12
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.77 | MP=0.79
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.29

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.140356365954967, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.7624513942484294, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.0273, variance: 2.4296
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [ 62 198 253]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9921568627450981
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 426, Initial round: False
[Neuron (0,)] Membrane potential: 0.9128, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.4128 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.3229, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2738, Threshold: 0.3000
[Neuron] (0,) membrane_potential=1.41 active=True
[Neuron (1,)] Membrane potential: 1.2291, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.2742, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,)] (target_specialty=2, min_dist=0.78)
[Neuron (3,)] Membrane potential: 0.9128, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.9128, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.6628 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.5894, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2447, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.3553 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.3761, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.4734, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.7332, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2595, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.36 active=True
[Neuron (2,)] Membrane potential: 1.5118, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.0675, Threshold: 0.3000
[Neuron] (4,) membrane_potential=2.18 active=True
[Neuron (5,)] Membrane potential: 1.2397, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=0.41)
[Neuron (6,)] Membrane potential: 1.2187, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.9040, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.1540 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.2525, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2024, Threshold: 0.3000
[Neuron (8,)] NOT ACTIVATED. Membrane potential: 0.2976 <= Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.30 active=False
[Neuron (5,)] Membrane potential: 0.9602, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.15 active=True
[Neuron (8,)] Membrane potential: 1.1866, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=6.34)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=18.6199, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 1: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 2: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 5: specialty=1.2435, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 7: specialty=2.7735, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.87 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 1.59 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 1 messages (MP=1.90, winner=False)
[Neuron] (2,) sent 1 messages (MP=2.26, winner=False)
[Neuron] (3,) sent 1 messages (MP=1.40, winner=False)
[Neuron] (4,) sent 1 messages (MP=2.18, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.96, winner=True)
[Neuron] (6,) sent 3 messages (MP=1.85, winner=True)
[Neuron] (7,) sent 2 messages (MP=1.15, winner=False)
[Neuron] (8,) sent 2 messages (MP=1.19, winner=False)
  Total messages sent: 14
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.2998, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.8034, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.7043, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->9.9844 [-0.0156]
  Weight (before->after) [Δ]: 0.4139->0.4760 [+0.0621]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0656
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.3267->1.0000 [-0.3267]
  Weight (before->after) [Δ]: 0.6829->0.5804 [-0.1024]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0366
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.2704->1.0000 [-0.2704]
  Weight (before->after) [Δ]: 0.5952->0.5059 [-0.0893]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0108
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.7565->0.8031 [+0.0466]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0553
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.3705->0.4260 [+0.0556]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0544
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 1.2435->1.1922 [-0.0513]
  Weight (before->after) [Δ]: 0.3647->0.3316 [-0.0331]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0013
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.7208->2.5721 [-0.1487]
  Weight (before->after) [Δ]: 0.4760->0.4046 [-0.0714]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0987
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 4.2312->1.0000 [-3.2312]
  Weight (before->after) [Δ]: 0.6713->0.5706 [-0.1007]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0625
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7358->1.0000 [-1.7358]
  Weight (before->after) [Δ]: 0.4671->0.3971 [-0.0701]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0937
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 3/9 neurons active (33.3%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['9.98', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 3.99
  Labels: ['Specialty_9.98', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=9.98 | MP=1.30
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.90
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.26

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '1.19']
  Target: green (specialty 6.5) | Current Mean: 1.06
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.19']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.40
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.18
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=1.19 | MP=2.14

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['2.57', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.52
  Labels: ['Specialty_2.57', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.57 | MP=2.10
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.15
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.19

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0733049246272477, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 2.5311830840089953, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.4775052511531848, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.1943, variance: 7.8212
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [214 115  48]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8392156862745098
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 428, Initial round: False
[Neuron (0,)] Membrane potential: 0.7721, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7721, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.2721 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.5018, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2552, Threshold: 0.3000
[Neuron (2,)] ACTIVATED! Membrane potential: 0.3448 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.9558, Threshold: 0.3000
[Neuron (3,)] Membrane potential: -0.8307, Threshold: 0.3000
[Neuron (0,)] Membrane potential: 1.1731, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1714, Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.34 active=True
[Neuron (3,)] Membrane potential: -0.0283, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.56 active=True
[Neuron (2,)] Membrane potential: 1.0893, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 1.4821, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 2.2821 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.7470, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.1309, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.1589, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1579, Threshold: 0.3000
[Neuron] (3,) membrane_potential=2.28 active=True
[Neuron (4,)] Membrane potential: 1.5058, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.0868, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.81)
[Neuron (6,)] Membrane potential: 0.7721, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.1721 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.3020, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2363, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.8197, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1767, Threshold: 0.3000
[Neuron (8,)] NOT ACTIVATED. Membrane potential: 0.1566 <= Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.16 active=False
[Neuron] (6,) membrane_potential=1.17 active=True
[Neuron (7,)] Membrane potential: 0.7847, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.9162, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=7.43)
[Controller] Winning cluster(s): ['C0'] (activation=2)
    Neuron 0: specialty=9.9844, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 2: specialty=18.4000, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 5: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 7: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 9.79 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 1.00 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 6.80 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=2.17, winner=False)
[Neuron] (1,) sent 1 messages (MP=2.16, winner=True)
[Neuron] (2,) sent 1 messages (MP=1.75, winner=True)
[Neuron] (3,) sent 3 messages (MP=2.28, winner=False)
[Neuron] (4,) sent 3 messages (MP=2.57, winner=False)
[Neuron] (5,) sent 3 messages (MP=1.90, winner=True)
[Neuron] (6,) sent 2 messages (MP=1.17, winner=True)
[Neuron] (7,) sent 1 messages (MP=1.03, winner=False)
[Neuron] (8,) sent 1 messages (MP=0.92, winner=False)
  Total messages sent: 17
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.9862, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.6072, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7499, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.0783, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 8.5765->1.0000 [-7.5765]
  Weight (before->after) [Δ]: 0.4533->0.3853 [-0.0680]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0946
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.3743->1.2754 [-0.0989]
  Weight (before->after) [Δ]: 0.4722->0.4014 [-0.0708]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0489
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6851->0.7879 [+0.1028]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0992
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.1299->1.0000 [-1.1299]
  Weight (before->after) [Δ]: 0.8465->0.7195 [-0.1270]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0057
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0899->1.0000 [-1.0899]
  Weight (before->after) [Δ]: 0.3834->0.3259 [-0.0575]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0259
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.0680->2.0470 [-0.0210]
  Weight (before->after) [Δ]: 0.3467->0.3157 [-0.0310]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0290
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.8599->2.7217 [-0.1382]
  Weight (before->after) [Δ]: 0.3619->0.3076 [-0.0543]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0882
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 9.7446->1.0000 [-8.7446]
  Weight (before->after) [Δ]: 0.6351->0.7304 [+0.0953]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0278
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.8428->1.0000 [-8.8428]
  Weight (before->after) [Δ]: 0.4153->0.4776 [+0.0623]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0190
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 2/3 neurons (66.7%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.28', '10.00']
  Target: red (specialty 2.5) | Current Mean: 4.09
  Labels: ['Specialty_1.00', 'Specialty_1.28', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.17
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.28 | MP=2.49
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.94

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '2.05']
  Target: green (specialty 6.5) | Current Mean: 1.35
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_2.05']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.28
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.57
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.05 | MP=2.15

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['2.72', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.57
  Labels: ['Specialty_2.72', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.72 | MP=1.08
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.03
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.92

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 3.9947986203927264, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.064078218077782, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.524028514937856, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.3382, variance: 7.6687
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [240 118 106]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9411764705882353
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 430, Initial round: False
[Neuron (0,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.5325 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.2020, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.3786, Threshold: 0.3000
[Neuron] (0,) membrane_potential=1.53 active=True
[Neuron (1,)] Membrane potential: 1.2934, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.9776, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.72)
[Neuron (3,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.2659 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.4880, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1660, Threshold: 0.3000
[Neuron (5,)] NOT ACTIVATED. Membrane potential: 0.2340 <= Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.23 active=False
[Neuron (2,)] Membrane potential: 0.9808, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1394, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.27 active=True
[Neuron (5,)] Membrane potential: 1.0812, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=3.95)
[Neuron (6,)] Membrane potential: 1.0443, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.0659 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.1280, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1933, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.3067 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.5699, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.3584, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.31 active=True
[Neuron (5,)] Membrane potential: 0.8576, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.97 active=True
[Neuron (8,)] Membrane potential: 1.1481, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=7.28)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=18.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 5: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 7: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.90 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 3.90 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.53, winner=False)
[Neuron] (1,) sent 1 messages (MP=1.96, winner=True)
[Neuron] (2,) sent 2 messages (MP=1.58, winner=False)
[Neuron] (3,) sent 2 messages (MP=0.74, winner=False)
[Neuron] (4,) sent 2 messages (MP=1.27, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.86, winner=True)
[Neuron] (6,) sent 2 messages (MP=1.96, winner=True)
[Neuron] (7,) sent 2 messages (MP=0.97, winner=False)
  Total messages sent: 14
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.8033, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7090, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.8017, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.3791->1.0000 [-0.3791]
  Weight (before->after) [Δ]: 0.3733->0.3173 [-0.0560]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0931
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.2889->1.2247 [-0.0642]
  Weight (before->after) [Δ]: 0.3752->0.3258 [-0.0494]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0142
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.9464->1.0000 [+0.0536]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0300
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.8528->0.9302 [+0.0774]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0786
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.3752->0.4315 [+0.0563]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0520
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.2756->0.3000 [+0.0244]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0398
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.7099->2.6318 [-0.0781]
  Weight (before->after) [Δ]: 0.2663->0.3000 [+0.0337]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0281
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.8990->1.0000 [-1.8990]
  Weight (before->after) [Δ]: 0.7213->0.6131 [-0.1082]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0051
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.8261->1.0000 [-8.8261]
  Weight (before->after) [Δ]: 0.5182->0.5959 [+0.0777]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0192
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 3/9 neurons active (33.3%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.22', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.07
  Labels: ['Specialty_1.00', 'Specialty_1.22', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.53
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.22 | MP=2.30
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.58

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: green (specialty 6.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.74
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.27
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.04

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['2.63', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.54
  Labels: ['Specialty_2.63', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.63 | MP=2.40
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.97
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.15

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.091801579787025, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.3490029829018575, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.5738979485645679, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 1.2063, variance: 0.2589
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [216  12  43]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8470588235294118
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 432, Initial round: False
[Neuron (0,)] Membrane potential: 0.7793, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7793, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.2793 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.5718, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4612, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.1388 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.14 active=False
[Neuron (3,)] Membrane potential: -0.4445, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.28 active=True
[Neuron (2,)] Membrane potential: 0.9070, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.78)
[Neuron (3,)] Membrane potential: 0.7383, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.1383 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.3733, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1856, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.0253, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1540, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.3460 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.0635, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1528, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6269, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2339, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.35 active=True
[Neuron] (3,) membrane_potential=1.23 active=True
[Neuron (4,)] Membrane potential: 1.1809, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.0976, Threshold: 0.3000
[Cluster C1] Winner(s): [(3,), (4,), (5,)] (target_specialty=6, min_dist=5.00)
[Neuron (6,)] Membrane potential: 1.1908, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.7908 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8558, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1696, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.3523, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.3102, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.79 active=True
[Neuron (7,)] Membrane potential: 1.0832, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.4139, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=7.37)
[Controller] Winning cluster(s): ['C1'] (activation=3)
    Neuron 0: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 2: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 3: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 4: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 5: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 6: specialty=20.0318, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 7: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C1 (green): 1.00 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 7.34 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 2 messages (MP=1.07, winner=False)
[Neuron] (1,) sent 3 messages (MP=2.03, winner=True)
[Neuron] (2,) sent 4 messages (MP=1.37, winner=False)
[Neuron] (3,) sent 4 messages (MP=1.23, winner=True)
[Neuron] (4,) sent 3 messages (MP=1.95, winner=True)
[Neuron] (5,) sent 3 messages (MP=1.86, winner=True)
[Neuron] (7,) sent 2 messages (MP=1.58, winner=False)
[Neuron] (8,) sent 1 messages (MP=2.41, winner=False)
  Total messages sent: 23
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.8633, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.1288, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.7961, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7073, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.6475, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3155->0.3000 [-0.0155]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0286
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.2831->0.3000 [+0.0169]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0053
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.0026->0.8522 [-0.1504]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0082
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.1279->2.1404 [+0.0125]
  Weight (before->after) [Δ]: 0.8293->0.7049 [-0.1244]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0625
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.1866->2.0926 [-0.0940]
  Weight (before->after) [Δ]: 0.3845->0.3268 [-0.0577]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0440
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.0699->2.0339 [-0.0359]
  Weight (before->after) [Δ]: 0.3097->0.3000 [-0.0097]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0141
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4317->0.4965 [+0.0648]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0924
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.7051->1.0000 [-1.7051]
  Weight (before->after) [Δ]: 0.6109->0.5193 [-0.0916]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0480
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7207->1.0000 [-1.7207]
  Weight (before->after) [Δ]: 0.6340->0.5389 [-0.0951]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0993
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.07
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.11
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.37

Cluster C1:
  Active: 3/3 neurons (100.0%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['2.14', '2.09', '2.03']
  Target: green (specialty 6.5) | Current Mean: 2.09
  Labels: ['Specialty_2.14', 'Specialty_2.09', 'Specialty_2.03']
  --- Neuron States ---
    Neuron (3,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.14 | MP=1.13
    Neuron (4,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.09 | MP=2.20
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.03 | MP=1.96

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['10.00', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_10.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=1.65
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.58
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.41

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0748937746625844, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.5439233905516314, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.3630, variance: 7.5382
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [180 167 112]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.7058823529411765
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 434, Initial round: False
[Neuron (0,)] Membrane potential: 0.6494, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 0.8994 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1187, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.3959, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: -0.1959 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=-0.20 active=False
[Neuron] (0,) membrane_potential=0.90 active=True
[Neuron (1,)] Membrane potential: 0.9082, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.4692, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.6494, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.6494, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.0494 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.2946, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1483, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.0357, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.2324, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.05 active=True
[Neuron (5,)] Membrane potential: 0.8810, Threshold: 0.3000
[Cluster C1] Winner(s): [(3,)] (target_specialty=6, min_dist=3.86)
[Neuron (6,)] Membrane potential: 0.8956, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6494, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.0494 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.0515, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2175, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.4492 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6633, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.3482, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.45 active=True
[Neuron (5,)] Membrane potential: 1.0302, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.26 active=True
[Neuron (8,)] Membrane potential: 1.0626, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0'] (activation=3)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 1: specialty=18.4000, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 3: specialty=19.5404, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 4: specialty=10.7926, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 5: specialty=2.0339, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 6: specialty=5.6500, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 7: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.80 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 10.79 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 5.45 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.90, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.31, winner=True)
[Neuron] (2,) sent 1 messages (MP=1.04, winner=True)
[Neuron] (3,) sent 2 messages (MP=0.49, winner=True)
[Neuron] (4,) sent 1 messages (MP=1.05, winner=False)
[Neuron] (5,) sent 1 messages (MP=1.43, winner=False)
[Neuron] (7,) sent 1 messages (MP=1.26, winner=False)
  Total messages sent: 9
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.8275, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.2035, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.9529, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.4550, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.9304, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.2579->1.1726 [-0.0853]
  Weight (before->after) [Δ]: 0.2881->0.3000 [+0.0119]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0353
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 10.0000->9.9866 [-0.0134]
  Weight (before->after) [Δ]: 0.3355->0.3858 [+0.0503]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0634
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.3311->1.3567 [+0.0256]
  Weight (before->after) [Δ]: 0.7961->0.6767 [-0.1194]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0756
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.8999->0.9919 [+0.0920]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0798
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.3387->0.3895 [+0.0508]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0940
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.9762->1.0000 [-1.9762]
  Weight (before->after) [Δ]: 0.3224->0.3000 [-0.0224]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0655
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 6.4471->6.4539 [+0.0067]
  Weight (before->after) [Δ]: 0.4674->0.3973 [-0.0701]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0567
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.7833->1.0000 [-1.7833]
  Weight (before->after) [Δ]: 0.5330->0.4531 [-0.0800]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0427
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.6658->1.0000 [-8.6658]
  Weight (before->after) [Δ]: 0.5832->0.6707 [+0.0875]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0010
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.17', '9.99', '1.36']
  Target: red (specialty 2.5) | Current Mean: 4.17
  Labels: ['Specialty_1.17', 'Specialty_9.99', 'Specialty_1.36']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.17 | MP=0.83
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=9.99 | MP=1.40
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.36 | MP=1.45

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['10.00', '1.00', '1.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_10.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (3,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=0.66
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.05
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.43

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['6.45', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 2.82
  Labels: ['Specialty_6.45', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=6.45 | MP=2.68
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.26
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.06

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 2.088964277933822, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.6633, variance: 14.2024
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [ 29 140 196]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.7686274509803922
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 436, Initial round: False
[Neuron (0,)] Membrane potential: 0.7071, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7071, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 0.9071 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.5092, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2946, Threshold: 0.3000
[Neuron (2,)] ACTIVATED! Membrane potential: 0.3721 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.6691, Threshold: 0.3000
[Neuron (3,)] Membrane potential: -0.8938, Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.7871, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1642, Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.37 active=True
[Neuron (3,)] Membrane potential: -0.2703, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.07 active=True
[Neuron (2,)] Membrane potential: 1.0495, Threshold: 0.3000
[Cluster C0] Winner(s): [(2,)] (target_specialty=2, min_dist=0.64)
[Neuron (3,)] Membrane potential: 1.0105, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.6105 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.6709, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.1447, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.8181, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1522, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.4478 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.5679, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1965, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.0309, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1754, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.45 active=True
[Neuron] (3,) membrane_potential=1.63 active=True
[Neuron (4,)] Membrane potential: 1.9196, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1191, Threshold: 0.3000
[Cluster C1] Winner(s): [(3,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.2623, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 2.0623 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8774, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.1035, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 2.2829, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.3184, Threshold: 0.3000
[Neuron] (6,) membrane_potential=2.06 active=True
[Neuron (7,)] Membrane potential: 1.4157, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.3342, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=3.55)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.1726, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 1: specialty=9.9866, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 3: specialty=5.6500, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 5: specialty=9.7000, status=ACTIVE, guess=green, correct?=yes, winner=False
    Neuron 6: specialty=2.1039, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 7: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 4.05 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 8.35 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 4.27 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.45, winner=False)
[Neuron] (2,) sent 1 messages (MP=1.67, winner=True)
[Neuron] (4,) sent 1 messages (MP=3.08, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.88, winner=False)
[Neuron] (6,) sent 1 messages (MP=2.06, winner=True)
[Neuron] (7,) sent 1 messages (MP=2.08, winner=False)
[Neuron] (8,) sent 1 messages (MP=2.33, winner=False)
  Total messages sent: 10
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (2,)] Membrane potential: 1.5373, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.5004, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7272, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.8973, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.3514->1.0000 [-0.3514]
  Weight (before->after) [Δ]: 0.3073->0.3000 [-0.0073]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0909
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 8.8714->1.0000 [-7.8714]
  Weight (before->after) [Δ]: 0.3597->0.3057 [-0.0540]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0946
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.2142->1.0927 [-0.1215]
  Weight (before->after) [Δ]: 0.5627->0.4783 [-0.0844]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0715
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 5.8369->5.7199 [-0.1169]
  Weight (before->after) [Δ]: 0.8989->0.7640 [-0.1348]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0669
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.1301->1.0000 [-8.1301]
  Weight (before->after) [Δ]: 0.4251->0.4888 [+0.0638]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0180
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 9.1171->9.2336 [+0.1166]
  Weight (before->after) [Δ]: 0.3805->0.4376 [+0.0571]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0666
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 3.7355->3.7652 [+0.0298]
  Weight (before->after) [Δ]: 0.3754->0.3191 [-0.0563]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0798
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 9.7981->1.0000 [-8.7981]
  Weight (before->after) [Δ]: 0.5237->0.6022 [+0.0785]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0647
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.8458->1.0000 [-1.8458]
  Weight (before->after) [Δ]: 0.6469->0.5499 [-0.0970]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0548
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.09']
  Target: red (specialty 2.5) | Current Mean: 1.03
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.09']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.45
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.82
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.09 | MP=2.04

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['5.72', '1.00', '9.23']
  Target: green (specialty 6.5) | Current Mean: 5.32
  Labels: ['Specialty_5.72', 'Specialty_1.00', 'Specialty_9.23']
  --- Neuron States ---
    Neuron (3,): Winner=True | Goal:✗ | Target:6.5 | Specialty=5.72 | MP=1.50
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=3.08
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=9.23 | MP=1.93

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['3.77', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.92
  Labels: ['Specialty_3.77', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=3.77 | MP=1.90
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.08
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.33

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.171958113092219, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.817950283677265, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.7568, variance: 7.7719
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [169  65 176]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.6901960784313725
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 438, Initial round: False
[Neuron (0,)] Membrane potential: 0.6350, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.1350 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1552, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2366, Threshold: 0.3000
[Neuron] (0,) membrane_potential=1.13 active=True
[Neuron (1,)] Membrane potential: 1.4122, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.0307, Threshold: 0.3000
[Cluster C0] Winner(s): [(2,)] (target_specialty=2, min_dist=0.91)
[Neuron (3,)] Membrane potential: 0.6350, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.6350, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.4350 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.2317, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1825, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.3250, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1250, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.43 active=True
[Neuron (5,)] Membrane potential: 0.6511, Threshold: 0.3000
[Cluster C1] Winner(s): [(3,)] (target_specialty=6, min_dist=0.28)
[Neuron (6,)] Membrane potential: 0.9800, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6350, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.1350 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.2366, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2155, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.4511 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6969, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.6261, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.45 active=True
[Neuron (5,)] Membrane potential: 0.6005, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.30 active=True
[Neuron (8,)] Membrane potential: 1.0500, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=6.23)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 1: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 2: specialty=18.4927, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 3: specialty=1.3699, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 5: specialty=9.2336, status=ACTIVE, guess=red, correct?=no, winner=False
    Neuron 6: specialty=21.1652, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=False
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 9.73 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 3.87 -> 6.50
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.13, winner=False)
[Neuron] (1,) sent 1 messages (MP=2.41, winner=False)
[Neuron] (2,) sent 1 messages (MP=2.07, winner=True)
[Neuron] (3,) sent 2 messages (MP=1.23, winner=True)
[Neuron] (4,) sent 1 messages (MP=1.43, winner=False)
  Total messages sent: 6
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (2,)] Membrane potential: 1.9090, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.1332, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.9204, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 2.1860, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.1931, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 8.2009->1.0000 [-7.2009]
  Weight (before->after) [Δ]: 0.3560->0.4094 [+0.0534]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0698
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.3694->1.0000 [-0.3694]
  Weight (before->after) [Δ]: 0.3374->0.3000 [-0.0374]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0981
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6351->0.7304 [+0.0953]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0918
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.3550->2.2131 [-0.1420]
  Weight (before->after) [Δ]: 0.7144->0.6072 [-0.1072]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0920
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.1945->1.0000 [-1.1945]
  Weight (before->after) [Δ]: 0.5279->0.4487 [-0.0792]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0057
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 8.7818->8.6454 [-0.1363]
  Weight (before->after) [Δ]: 0.3968->0.3372 [-0.0595]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0863
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 21.1652->10.0000 [-11.1652]
  Weight (before->after) [Δ]: 0.3532->0.4061 [+0.0530]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0290
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6158->0.5234 [-0.0924]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0270
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.5831->0.6705 [+0.0875]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0663
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: red (specialty 2.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.13
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.41
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=2.51

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['2.21', '1.00', '8.65']
  Target: green (specialty 6.5) | Current Mean: 3.95
  Labels: ['Specialty_2.21', 'Specialty_1.00', 'Specialty_8.65']
  --- Neuron States ---
    Neuron (3,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.21 | MP=1.47
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.43
    Neuron (5,): Winner=False | Goal:✗ | Target:6.5 | Specialty=8.65 | MP=1.32

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['10.00', '1.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_10.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=2.94
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.19
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.05

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0309148922311675, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 5.317854508960212, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.9217429149813576, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.9843, variance: 15.7523
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [68 85 96]
[Step 2b] Goal for this run: detect_red
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.3764705882352941
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 440, Initial round: False
[Neuron (0,)] Membrane potential: 0.3464, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.3464, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.0130 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.1184, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.3336, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2664 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.27 active=False
[Neuron (3,)] Membrane potential: -0.2662, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.01 active=True
[Neuron (2,)] Membrane potential: 0.5915, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.5614, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.0614 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.2105, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1809, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7924, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1523, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.4477 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.0966, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1750, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.7103, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1862, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.45 active=True
[Neuron] (3,) membrane_potential=1.31 active=True
[Neuron (4,)] Membrane potential: 1.0485, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.7582, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=2.65)
[Neuron (6,)] Membrane potential: 0.9213, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.7213 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.5452, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.5404, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.3871, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.3325, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.72 active=True
[Neuron (7,)] Membrane potential: 1.7635, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.9605, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0'] (activation=2)
    Neuron 0: specialty=18.4000, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 2: specialty=18.7000, status=INACTIVE, guess=red, correct?=yes, winner=False
    Neuron 3: specialty=2.2131, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 5: specialty=26.0454, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 6: specialty=5.6500, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
    Neuron 8: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 12.70 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 9.75 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 2.55 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.62, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.79, winner=True)
[Neuron] (2,) sent 1 messages (MP=1.21, winner=False)
[Neuron] (3,) sent 2 messages (MP=1.31, winner=False)
[Neuron] (4,) sent 1 messages (MP=2.14, winner=False)
[Neuron] (7,) sent 1 messages (MP=2.76, winner=False)
[Neuron] (8,) sent 1 messages (MP=1.96, winner=False)
  Total messages sent: 8
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.5689, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.6490, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.4216, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.5836, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 2.5424, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.8036, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.5659->0.6508 [+0.0849]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0233
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.2249->1.1994 [-0.0255]
  Weight (before->after) [Δ]: 0.2807->0.3000 [+0.0193]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0245
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.8340->0.9591 [+0.1251]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0917
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 3.1305->1.0000 [-2.1305]
  Weight (before->after) [Δ]: 0.5737->0.4876 [-0.0861]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0147
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.1392->1.0000 [-1.1392]
  Weight (before->after) [Δ]: 0.4075->0.3463 [-0.0611]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0107
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4305->0.4951 [+0.0646]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0817
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 6.4708->6.4175 [-0.0532]
  Weight (before->after) [Δ]: 0.3519->0.3000 [-0.0519]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0032
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.8212->2.8353 [+0.0141]
  Weight (before->after) [Δ]: 0.4880->0.4148 [-0.0732]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0641
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7496->2.7462 [-0.0035]
  Weight (before->after) [Δ]: 0.6718->0.5711 [-0.1008]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0465
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 6/9 neurons active (66.7%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 2/3 neurons (66.7%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['10.00', '1.20', '1.00']
  Target: red (specialty 2.5) | Current Mean: 4.07
  Labels: ['Specialty_10.00', 'Specialty_1.20', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=0.90
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.20 | MP=2.15
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.21

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.31
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.14
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=2.42

Cluster C2:
  Active: 3/3 neurons (100.0%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['6.42', '2.84', '2.75']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_6.42', 'Specialty_2.84', 'Specialty_2.75']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=6.42 | MP=1.58
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.84 | MP=3.21
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.75 | MP=2.30

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 3.9528395012335995, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 4.0221, variance: 12.8458
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [ 35  10 252]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9882352941176471
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 442, Initial round: False
[Neuron (0,)] Membrane potential: 0.9092, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.2425 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1557, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4321, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2345 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.23 active=False
[Neuron] (0,) membrane_potential=1.24 active=True
[Neuron (1,)] Membrane potential: 1.3793, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.1249, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.80)
[Neuron (3,)] Membrane potential: 0.9092, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.9092, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.5092 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6355, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2223, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.6028, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1422, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.51 active=True
[Neuron (5,)] Membrane potential: 1.6247, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.6984, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.9092, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.5758 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 2.3403, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2310, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.4356 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.2059, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 2.9309, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.44 active=True
[Neuron (5,)] Membrane potential: 2.1924, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.96 active=True
[Neuron (8,)] Membrane potential: 1.3100, Threshold: 0.3000
[Cluster C2] Winner(s): [(6,)] (target_specialty=10, min_dist=3.58)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=10.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 4: specialty=9.7000, status=ACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 5: specialty=5.6500, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=2.0675, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 7: specialty=2.8353, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 8: specialty=2.7462, status=ACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C2 (blue): 2.55 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 2 messages (MP=2.05, winner=True)
[Neuron] (2,) sent 2 messages (MP=1.60, winner=False)
[Neuron] (3,) sent 2 messages (MP=0.97, winner=False)
[Neuron] (5,) sent 2 messages (MP=3.19, winner=True)
[Neuron] (6,) sent 3 messages (MP=3.93, winner=True)
[Neuron] (7,) sent 3 messages (MP=1.96, winner=False)
[Neuron] (8,) sent 2 messages (MP=1.31, winner=False)
  Total messages sent: 16
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.8823, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.3884, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 2.9370, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 3.6165, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.2052, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.6966->0.5921 [-0.1045]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0379
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.2973->0.3000 [+0.0027]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0412
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.9395->0.7985 [-0.1409]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0398
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4409->0.3748 [-0.0661]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0145
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.7000->9.7875 [+0.0875]
  Weight (before->after) [Δ]: 0.4301->0.4947 [+0.0645]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0375
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 5.6500->5.5742 [-0.0758]
  Weight (before->after) [Δ]: 0.4470->0.3800 [-0.0671]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0258
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 3.6159->3.5942 [-0.0217]
  Weight (before->after) [Δ]: 0.2716->0.3000 [+0.0284]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0283
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 4.1774->1.0000 [-3.1774]
  Weight (before->after) [Δ]: 0.4296->0.3651 [-0.0644]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0916
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 4.1274->3.9936 [-0.1338]
  Weight (before->after) [Δ]: 0.5455->0.4637 [-0.0818]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0838
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.24
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.28
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.60

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '9.79', '5.57']
  Target: green (specialty 6.5) | Current Mean: 5.45
  Labels: ['Specialty_1.00', 'Specialty_9.79', 'Specialty_5.57']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.97
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=9.79 | MP=1.39
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=5.57 | MP=3.54

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['3.59', '1.00', '3.99']
  Target: blue (specialty 10.0) | Current Mean: 2.86
  Labels: ['Specialty_3.59', 'Specialty_1.00', 'Specialty_3.99']
  --- Neuron States ---
    Neuron (6,): Winner=True | Goal:✗ | Target:10.0 | Specialty=3.59 | MP=4.02
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.96
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=3.99 | MP=1.21

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.066472530378932, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.999681975293216, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.1055, variance: 8.2152
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [128  74  39]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.5019607843137255
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 444, Initial round: False
[Neuron (0,)] Membrane potential: 0.4618, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.4618, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 0.8618 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.1612, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.3828, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.1172 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.12 active=False
[Neuron (3,)] Membrane potential: -0.1826, Threshold: 0.3000
[Neuron] (1,) membrane_potential=0.86 active=True
[Neuron (2,)] Membrane potential: 0.5696, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.6618, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.0618 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.1412, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.2061, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.6571, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1911, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.4089 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.5062, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1537, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.7943, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1505, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.41 active=True
[Neuron] (3,) membrane_potential=1.39 active=True
[Neuron (4,)] Membrane potential: 1.8475, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8380, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=0.43)
[Neuron (6,)] Membrane potential: 0.6884, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.0884 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.5798, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.0749, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 2.4024, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.2324, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.09 active=True
[Neuron (7,)] Membrane potential: 0.7609, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.5547, Threshold: 0.3000
[Cluster C2] Winner(s): [(8,)] (target_specialty=10, min_dist=6.01)
[Controller] Winning cluster(s): ['C0'] (activation=3)
    Neuron 0: specialty=18.4000, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 2: specialty=18.4000, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=18.4875, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 5: specialty=1.2242, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 6: specialty=3.5942, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
    Neuron 8: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 12.60 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 1.86 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.16, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.66, winner=True)
[Neuron] (2,) sent 1 messages (MP=1.14, winner=True)
[Neuron] (3,) sent 2 messages (MP=1.39, winner=False)
[Neuron] (5,) sent 2 messages (MP=1.58, winner=True)
[Neuron] (6,) sent 2 messages (MP=1.09, winner=False)
[Neuron] (7,) sent 3 messages (MP=1.16, winner=False)
[Neuron] (8,) sent 2 messages (MP=0.89, winner=True)
  Total messages sent: 16
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.0683, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.5245, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.0499, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.4534, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.0680, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.8170, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.7078->0.8140 [+0.1062]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0843
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.2192->1.0868 [-0.1324]
  Weight (before->after) [Δ]: 0.2593->0.3000 [+0.0407]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0824
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.0278->1.0000 [-0.0278]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0576
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3933->0.3343 [-0.0590]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0429
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 18.4875->1.0000 [-17.4875]
  Weight (before->after) [Δ]: 0.5336->0.6136 [+0.0800]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0546
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 1.2242->1.2427 [+0.0185]
  Weight (before->after) [Δ]: 0.3843->0.3267 [-0.0576]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0685
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 4.7964->1.0000 [-3.7964]
  Weight (before->after) [Δ]: 0.3341->0.3000 [-0.0341]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0777
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.8739->2.9082 [+0.0342]
  Weight (before->after) [Δ]: 0.3873->0.3365 [-0.0508]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0842
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7236->2.7685 [+0.0450]
  Weight (before->after) [Δ]: 0.4333->0.3683 [-0.0650]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0950
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 6/9 neurons active (66.7%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['10.00', '1.09', '10.00']
  Target: red (specialty 2.5) | Current Mean: 7.03
  Labels: ['Specialty_10.00', 'Specialty_1.09', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.57
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.09 | MP=2.02
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.55

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '1.24']
  Target: green (specialty 6.5) | Current Mean: 1.08
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.24']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.39
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=3.40
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=1.24 | MP=1.79

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '2.91', '2.77']
  Target: blue (specialty 10.0) | Current Mean: 2.23
  Labels: ['Specialty_1.00', 'Specialty_2.91', 'Specialty_2.77']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.09
    Neuron (7,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.91 | MP=1.27
    Neuron (8,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.77 | MP=1.02

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 5.4538936862540774, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.86261295737663, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.4451, variance: 12.7808
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [29 62 73]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.28627450980392155
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 446, Initial round: False
[Neuron (0,)] Membrane potential: 0.2634, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 0.7634 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1428, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4511, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2155 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.22 active=False
[Neuron] (0,) membrane_potential=0.76 active=True
[Neuron (1,)] Membrane potential: 0.7454, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.4617, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.91)
[Neuron (3,)] Membrane potential: 0.2634, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.2634, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.2634 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.0689, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1549, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.0264, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1338, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.26 active=True
[Neuron (5,)] Membrane potential: 0.5809, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.76)
[Neuron (6,)] Membrane potential: 0.3703, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.2634, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 0.4634 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.4369, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1662, Threshold: 0.3000
[Neuron (8,)] NOT ACTIVATED. Membrane potential: 0.2338 <= Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.23 active=False
[Neuron (5,)] Membrane potential: 0.8395, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.46 active=True
[Neuron (8,)] Membrane potential: 0.4784, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=7.09)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=10.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=18.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 5: specialty=18.6427, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 8: specialty=2.7685, status=INACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 9.90 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 1.59 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.76, winner=False)
[Neuron] (1,) sent 1 messages (MP=1.41, winner=True)
[Neuron] (2,) sent 1 messages (MP=0.97, winner=False)
[Neuron] (3,) sent 2 messages (MP=0.40, winner=False)
[Neuron] (4,) sent 2 messages (MP=1.26, winner=False)
[Neuron] (6,) sent 3 messages (MP=0.84, winner=False)
[Neuron] (7,) sent 2 messages (MP=0.46, winner=True)
[Neuron] (8,) sent 2 messages (MP=0.48, winner=False)
  Total messages sent: 15
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.2991, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.3244, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.4263, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 8.4508->1.0000 [-7.4508]
  Weight (before->after) [Δ]: 0.8628->0.7334 [-0.1294]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0261
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.2845->1.3190 [+0.0344]
  Weight (before->after) [Δ]: 0.2871->0.3000 [+0.0129]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0844
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 1.1278->1.0000 [-0.1278]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0089
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3798->0.3228 [-0.0570]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0124
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6132->0.5212 [-0.0920]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0927
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 18.6427->10.0000 [-8.6427]
  Weight (before->after) [Δ]: 0.4158->0.4782 [+0.0624]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0835
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.8738->1.0000 [-1.8738]
  Weight (before->after) [Δ]: 0.2908->0.3000 [+0.0092]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0277
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.8411->2.8652 [+0.0242]
  Weight (before->after) [Δ]: 0.3297->0.3097 [-0.0200]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0742
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 4.1477->1.0000 [-3.1477]
  Weight (before->after) [Δ]: 0.3903->0.3318 [-0.0585]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0256
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 3/9 neurons active (33.3%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.32', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.11
  Labels: ['Specialty_1.00', 'Specialty_1.32', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.76
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.32 | MP=1.80
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.97

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.40
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.26
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=1.92

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '2.87', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.62
  Labels: ['Specialty_1.00', 'Specialty_2.87', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.84
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.87 | MP=0.43
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.48

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 7.028930596769375, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.0809001210798823, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.2255626836270217, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.2427, variance: 7.8536
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [115 229 191]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8980392156862745
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 448, Initial round: False
[Neuron (0,)] Membrane potential: 0.8262, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.8262, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.3262 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.4053, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4468, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.0532 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.05 active=False
[Neuron (3,)] Membrane potential: -0.1574, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.33 active=True
[Neuron (2,)] Membrane potential: 0.8751, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.68)
[Neuron (3,)] Membrane potential: 1.0494, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.4494 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.3583, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.2238, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.0991, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2018, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.3982 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1432, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1575, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.1760, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1484, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.40 active=True
[Neuron] (3,) membrane_potential=1.78 active=True
[Neuron (4,)] Membrane potential: 1.1544, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1925, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.0493, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.4493 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.8953, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.0217, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.2857, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1866, Threshold: 0.3000
[Neuron (8,)] NOT ACTIVATED. Membrane potential: 0.1468 <= Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.15 active=False
[Neuron] (6,) membrane_potential=1.45 active=True
[Neuron (7,)] Membrane potential: 1.3062, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.9612, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=7.13)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 5: specialty=5.6500, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 8: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C2 (blue): 3.90 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 2 messages (MP=0.91, winner=False)
[Neuron] (1,) sent 3 messages (MP=2.10, winner=True)
[Neuron] (2,) sent 3 messages (MP=1.36, winner=False)
[Neuron] (3,) sent 2 messages (MP=1.78, winner=False)
[Neuron] (4,) sent 1 messages (MP=1.89, winner=False)
[Neuron] (5,) sent 1 messages (MP=1.90, winner=True)
[Neuron] (6,) sent 1 messages (MP=1.45, winner=False)
[Neuron] (7,) sent 2 messages (MP=1.81, winner=True)
[Neuron] (8,) sent 1 messages (MP=0.96, winner=False)
  Total messages sent: 17
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.9312, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7437, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.6617, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.8843, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.7713->0.6556 [-0.1157]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0098
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.2433->0.3000 [+0.0567]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0719
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.9714->0.8257 [-0.1457]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0984
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3396->0.3000 [-0.0396]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0093
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.7000->1.0000 [-8.7000]
  Weight (before->after) [Δ]: 0.5800->0.6670 [+0.0870]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0462
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 5.6500->5.6137 [-0.0363]
  Weight (before->after) [Δ]: 0.3855->0.3277 [-0.0578]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0137
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 9.7434->1.0000 [-8.7434]
  Weight (before->after) [Δ]: 0.3938->0.4529 [+0.0591]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0746
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.7029->2.6621 [-0.0408]
  Weight (before->after) [Δ]: 0.3074->0.3000 [-0.0074]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0092
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7452->2.6583 [-0.0869]
  Weight (before->after) [Δ]: 0.3810->0.3239 [-0.0572]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0369
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.91
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=2.18
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.36

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '5.61']
  Target: green (specialty 6.5) | Current Mean: 2.54
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_5.61']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.78
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.89
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=5.61 | MP=2.24

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '2.66', '2.66']
  Target: blue (specialty 10.0) | Current Mean: 2.11
  Labels: ['Specialty_1.00', 'Specialty_2.66', 'Specialty_2.66']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.45
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.66 | MP=2.06
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.66 | MP=0.88

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.106319097635305, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.6217427325578526, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 1.8816, variance: 2.2005
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [124  85 112]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.48627450980392156
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 450, Initial round: False
[Neuron (0,)] Membrane potential: 0.4474, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 0.6974 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1513, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.3771, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: -0.1771 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=-0.18 active=False
[Neuron] (0,) membrane_potential=0.70 active=True
[Neuron (1,)] Membrane potential: 0.6761, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.2844, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.4474, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.4474, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.0474 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.2722, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1428, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.1155, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.2132, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.05 active=True
[Neuron (5,)] Membrane potential: 0.9293, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=0.39)
[Neuron (6,)] Membrane potential: 0.7112, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.4474, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 0.8474 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.9011, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1195, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.3805 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6483, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.2291, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.38 active=True
[Neuron (5,)] Membrane potential: 1.3255, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.25 active=True
[Neuron (8,)] Membrane potential: 0.7974, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=7.34)
[Controller] Winning cluster(s): ['C0'] (activation=3)
    Neuron 0: specialty=18.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 1: specialty=18.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 2: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 5: specialty=1.2637, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 7: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 8: specialty=11.3583, status=INACTIVE, guess=blue, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 12.60 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 3.99 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 4.45 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=0.70, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.08, winner=True)
[Neuron] (2,) sent 1 messages (MP=0.88, winner=True)
[Neuron] (3,) sent 2 messages (MP=0.61, winner=False)
[Neuron] (5,) sent 3 messages (MP=2.08, winner=True)
[Neuron] (6,) sent 2 messages (MP=1.98, winner=False)
[Neuron] (7,) sent 2 messages (MP=1.25, winner=True)
  Total messages sent: 13
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.6416, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.9901, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.8137, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.9095, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.1485, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->9.9814 [-0.0186]
  Weight (before->after) [Δ]: 0.8559->0.9843 [+0.1284]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0686
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 10.0000->9.9642 [-0.0358]
  Weight (before->after) [Δ]: 0.4277->0.4918 [+0.0642]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0858
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 1.3392->1.3842 [+0.0450]
  Weight (before->after) [Δ]: 0.7584->0.6446 [-0.1138]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0950
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.0050->1.0000 [-1.0050]
  Weight (before->after) [Δ]: 0.3029->0.3000 [-0.0029]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0566
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 8.9812->1.0000 [-7.9812]
  Weight (before->after) [Δ]: 0.7580->0.8717 [+0.1137]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0442
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 2.2820->2.1904 [-0.0916]
  Weight (before->after) [Δ]: 0.2871->0.3000 [+0.0129]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0416
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.8411->1.0000 [-1.8411]
  Weight (before->after) [Δ]: 0.4636->0.3940 [-0.0695]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0973
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 2.7693->2.6576 [-0.1117]
  Weight (before->after) [Δ]: 0.2639->0.3000 [+0.0361]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0617
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 0.3228->0.3712 [+0.0484]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0334
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['9.98', '9.96', '1.38']
  Target: red (specialty 2.5) | Current Mean: 7.11
  Labels: ['Specialty_9.98', 'Specialty_9.96', 'Specialty_1.38']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=9.98 | MP=0.64
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=9.96 | MP=1.19
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.38 | MP=1.31

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '2.19']
  Target: green (specialty 6.5) | Current Mean: 1.40
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_2.19']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=0.61
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.05
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=2.19 | MP=2.31

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '2.66', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 1.55
  Labels: ['Specialty_1.00', 'Specialty_2.66', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.98
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=2.66 | MP=1.15
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.80

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 1.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 2.53789726247793, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 2.106816133141246, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.3531, variance: 12.8334
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [55 18 35]
[Step 2b] Goal for this run: detect_red
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.21568627450980393
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 452, Initial round: False
[Neuron (0,)] Membrane potential: 0.1984, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.1984, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 0.3984 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: -0.2604, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.2911, Threshold: 0.3000
[Neuron (2,)] ACTIVATED! Membrane potential: 0.3755 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.1293, Threshold: 0.3000
[Neuron (3,)] Membrane potential: -0.2803, Threshold: 0.3000
[Neuron (0,)] Membrane potential: -0.2225, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.3732, Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.38 active=True
[Neuron (3,)] Membrane potential: 0.2941, Threshold: 0.3000
[Neuron] (1,) membrane_potential=0.53 active=True
[Neuron (2,)] Membrane potential: 0.5439, Threshold: 0.3000
[Cluster C0] Winner(s): [(2,)] (target_specialty=2, min_dist=0.62)
[Neuron (3,)] Membrane potential: 1.0210, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.6210 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.2093, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.2034, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.2497, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1555, Threshold: 0.3000
[Neuron (5,)] NOT ACTIVATED. Membrane potential: 0.2445 <= Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.24 active=False
[Neuron] (3,) membrane_potential=1.62 active=True
[Neuron (4,)] Membrane potential: 1.3055, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.4234, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=3.81)
[Neuron (6,)] Membrane potential: 0.1984, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 0.5984 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 0.2340, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.1500, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.7258, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1932, Threshold: 0.3000
[Neuron] (6,) membrane_potential=0.60 active=True
[Neuron (7,)] Membrane potential: 0.3671, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 0.9407, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=7.34)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=18.6814, status=INACTIVE, guess=red, correct?=yes, winner=False
    Neuron 1: specialty=9.9642, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 2: specialty=18.7842, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 5: specialty=19.5904, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 7: specialty=20.0576, status=ACTIVE, guess=red, correct?=yes, winner=True
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=blue, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 15.81 -> 2.50
[Controller] Applied corrective guidance to cluster C2 (blue): 7.35 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 2 messages (MP=0.44, winner=False)
[Neuron] (1,) sent 2 messages (MP=1.25, winner=False)
[Neuron] (2,) sent 2 messages (MP=1.21, winner=True)
[Neuron] (3,) sent 1 messages (MP=1.62, winner=False)
[Neuron] (4,) sent 2 messages (MP=2.73, winner=False)
[Neuron] (6,) sent 2 messages (MP=0.60, winner=False)
[Neuron] (8,) sent 1 messages (MP=1.94, winner=False)
  Total messages sent: 12
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (2,)] Membrane potential: 1.1125, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1353, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.6444, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 1.1073->1.0000 [-0.1073]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0700
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 8.5102->1.0000 [-7.5102]
  Weight (before->after) [Δ]: 0.5158->0.4384 [-0.0774]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0113
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.8228->0.9462 [+0.1234]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0185
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3047->0.3000 [-0.0047]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0898
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.8426->0.7162 [-0.1264]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0371
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 19.5904->10.0000 [-9.5904]
  Weight (before->after) [Δ]: 0.4395->0.5054 [+0.0659]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0004
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.8759->1.0000 [-1.8759]
  Weight (before->after) [Δ]: 0.4110->0.3493 [-0.0616]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0727
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4027->0.4632 [+0.0604]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0281
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.8225->1.0000 [-1.8225]
  Weight (before->after) [Δ]: 0.3923->0.3335 [-0.0588]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0953
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 3/9 neurons active (33.3%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: red (specialty 2.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.44
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.25
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.45

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.62
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=2.73
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=2.14

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=0.60
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=0.98
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.94

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 7.1099276923289025, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 1.3967847894192256, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 1.552520131082975, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 4.0000, variance: 18.0000
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [235  46  13]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9215686274509803
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 454, Initial round: False
[Neuron (0,)] Membrane potential: 0.8478, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.2478 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.1863, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4306, Threshold: 0.3000
[Neuron] (0,) membrane_potential=1.25 active=True
[Neuron (1,)] Membrane potential: 1.1364, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.9116, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (1,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.8478, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.8478, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.4478 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6432, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2356, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.7644 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.9844, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.3215, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.9149, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.2319, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.76 active=True
[Neuron (2,)] Membrane potential: 0.8681, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.1642, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.58 active=True
[Neuron (5,)] Membrane potential: 1.5511, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.4589, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.0945, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.5945 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.6414, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1347, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.5320 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.2350, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.9014, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.53 active=True
[Neuron (5,)] Membrane potential: 1.1914, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.83 active=True
[Neuron (8,)] Membrane potential: 1.3373, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0'] (activation=2)
    Neuron 0: specialty=18.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 1: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 2: specialty=18.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 5: specialty=5.6500, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 6: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 7: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 12.70 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 2.55 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 12.70 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 1 messages (MP=1.25, winner=True)
[Neuron] (1,) sent 1 messages (MP=1.64, winner=True)
[Neuron] (2,) sent 1 messages (MP=1.47, winner=False)
[Neuron] (3,) sent 2 messages (MP=1.58, winner=False)
[Neuron] (4,) sent 1 messages (MP=1.58, winner=False)
[Neuron] (6,) sent 1 messages (MP=2.70, winner=False)
[Neuron] (7,) sent 1 messages (MP=1.83, winner=True)
  Total messages sent: 10
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.1480, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.5055, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 2.0161, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.6882, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.2252->1.0000 [-0.2252]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0656
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 1.3704->1.2553 [-0.1151]
  Weight (before->after) [Δ]: 0.3560->0.3026 [-0.0534]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0651
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 1.0766->1.0000 [-0.0766]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0246
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.1324->1.0000 [-1.1324]
  Weight (before->after) [Δ]: 0.2975->0.3000 [+0.0025]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0111
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0800->1.0000 [-1.0800]
  Weight (before->after) [Δ]: 0.7166->0.6091 [-0.1075]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0796
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 5.7333->5.6857 [-0.0476]
  Weight (before->after) [Δ]: 0.4738->0.4027 [-0.0711]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0024
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 9.6987->1.0000 [-8.6987]
  Weight (before->after) [Δ]: 0.4019->0.4622 [+0.0603]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0140
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.6555->0.7538 [+0.0983]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0358
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.7980->1.0000 [-1.7980]
  Weight (before->after) [Δ]: 0.3162->0.3000 [-0.0162]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0336
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 2/3 neurons (66.7%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['10.00', '1.26', '1.00']
  Target: red (specialty 2.5) | Current Mean: 4.09
  Labels: ['Specialty_10.00', 'Specialty_1.26', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.15
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.26 | MP=1.91
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.47

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '5.69']
  Target: green (specialty 6.5) | Current Mean: 2.56
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_5.69']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.58
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.58
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=5.69 | MP=3.02

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.70
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=1.69
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.34

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 3.5490, variance: 13.9494
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [207 172 218]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.8549019607843137
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 456, Initial round: False
[Neuron (0,)] Membrane potential: 0.7865, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7865, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.1865 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.2711, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4784, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.1216 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.12 active=False
[Neuron (3,)] Membrane potential: -0.1236, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.19 active=True
[Neuron (2,)] Membrane potential: 0.8984, Threshold: 0.3000
[Cluster C0] Winner(s): [(1,)] (target_specialty=2, min_dist=0.74)
[Neuron (3,)] Membrane potential: 1.2248, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.8248 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.3481, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.2779, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.9470, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.1997, Threshold: 0.3000
[Neuron] (3,) membrane_potential=1.82 active=True
[Neuron (4,)] Membrane potential: 0.9908, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.5228, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=0.31)
[Neuron (6,)] Membrane potential: 0.7865, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.5865 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 2.1213, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.3543, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.0777, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1564, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.59 active=True
[Neuron (7,)] Membrane potential: 0.9206, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.1026, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=18.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 1: specialty=18.6553, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 2: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 3: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 5: specialty=23.0857, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 7: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 15.69 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 11.26 -> 6.50
[Step 7] Neurons sending messages to neighbors...
[Neuron] (0,) sent 2 messages (MP=0.60, winner=False)
[Neuron] (1,) sent 3 messages (MP=1.95, winner=True)
[Neuron] (2,) sent 3 messages (MP=1.35, winner=False)
[Neuron] (3,) sent 3 messages (MP=1.82, winner=False)
[Neuron] (4,) sent 1 messages (MP=1.74, winner=False)
[Neuron] (5,) sent 1 messages (MP=3.12, winner=True)
[Neuron] (6,) sent 2 messages (MP=1.59, winner=False)
[Neuron] (8,) sent 1 messages (MP=1.60, winner=False)
  Total messages sent: 18
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (1,)] Membrane potential: 1.7913, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 2.8716, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.3069, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 10.0000->1.0000 [-9.0000]
  Weight (before->after) [Δ]: 1.1311->1.0000 [-0.1311]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0775
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4085->0.4698 [+0.0613]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0986
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 8.2655->1.0000 [-7.2655]
  Weight (before->after) [Δ]: 1.1961->1.0000 [-0.1961]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0497
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 9.0962->1.0000 [-8.0962]
  Weight (before->after) [Δ]: 0.3089->0.3553 [+0.0463]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0470
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0806->1.0000 [-1.0806]
  Weight (before->after) [Δ]: 0.6267->0.5327 [-0.0940]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0861
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.5362->0.6166 [+0.0804]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0365
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.4774->0.4058 [-0.0716]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0072
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 27.4000->10.0000 [-17.4000]
  Weight (before->after) [Δ]: 0.9511->1.0000 [+0.0489]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0114
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3400->0.3000 [-0.0400]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0985
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 3/9 neurons active (33.3%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=0.60
    Neuron (1,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=2.04
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.35

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.82
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.74
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=3.47

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.59
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=1.64
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.60

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.085089024352816, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 2.5618934353338774, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 4.0000, variance: 18.0000
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [ 45 209 232]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9098039215686274
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 458, Initial round: False
[Neuron (0,)] Membrane potential: 0.8370, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.0370 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.2043, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4695, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: -0.0695 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=-0.07 active=False
[Neuron] (0,) membrane_potential=1.04 active=True
[Neuron (1,)] Membrane potential: 1.0170, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.7731, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,), (2,)] (target_specialty=2, min_dist=1.00)
[Neuron (3,)] Membrane potential: 0.8370, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.8370, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.3370 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6213, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.2810, Threshold: 0.3000
[Neuron (5,)] ACTIVATED! Membrane potential: 0.3190 > Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.9718, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.3686, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6528, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.4409, Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.32 active=True
[Neuron (2,)] Membrane potential: 0.2417, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 0.1209, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.57 active=True
[Neuron (5,)] Membrane potential: 1.1305, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.4083, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8914, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.3914 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.5713, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1246, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.3754 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8392, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.8134, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.38 active=True
[Neuron (5,)] Membrane potential: 0.7591, Threshold: 0.3000
[Neuron] (7,) membrane_potential=1.44 active=True
[Neuron (8,)] Membrane potential: 1.1823, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0'] (activation=2)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=green, correct?=no, winner=True
    Neuron 1: specialty=10.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 2: specialty=18.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 5: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 7: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 8: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 9.80 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 9.80 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 12.70 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 1 messages (MP=1.42, winner=False)
[Neuron] (2,) sent 1 messages (MP=1.24, winner=True)
[Neuron] (3,) sent 1 messages (MP=1.05, winner=False)
[Neuron] (4,) sent 2 messages (MP=1.57, winner=False)
[Neuron] (5,) sent 1 messages (MP=1.76, winner=True)
[Neuron] (6,) sent 1 messages (MP=2.61, winner=False)
[Neuron] (7,) sent 2 messages (MP=1.44, winner=True)
[Neuron] (8,) sent 1 messages (MP=1.18, winner=False)
  Total messages sent: 12
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 0.9541, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.1423, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.6184, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 1.3241, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.3019->1.1914 [-0.1105]
  Weight (before->after) [Δ]: 0.9617->0.8174 [-0.1443]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0605
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 8.4832->1.0000 [-7.4832]
  Weight (before->after) [Δ]: 0.4442->0.3776 [-0.0666]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0964
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.3269->1.0000 [-0.3269]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0705
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.0528->1.0000 [-1.0528]
  Weight (before->after) [Δ]: 0.3234->0.3000 [-0.0234]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0900
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0171->1.0000 [-1.0171]
  Weight (before->after) [Δ]: 0.5334->0.4534 [-0.0800]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0196
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.7941->0.9132 [+0.1191]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0882
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 2.7090->1.0000 [-1.7090]
  Weight (before->after) [Δ]: 0.4006->0.3405 [-0.0601]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0779
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.2460->1.0000 [-0.2460]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0513
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 9.6894->1.0000 [-8.6894]
  Weight (before->after) [Δ]: 0.3116->0.3584 [+0.0467]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0226
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 4/9 neurons active (44.4%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 2/3 neurons (66.7%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.19', '1.00', '10.00']
  Target: red (specialty 2.5) | Current Mean: 4.06
  Labels: ['Specialty_1.19', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.19 | MP=0.95
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.42
    Neuron (2,): Winner=True | Goal:✗ | Target:2.5 | Specialty=10.00 | MP=1.64

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.05
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.57
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=2.12

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.61
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=1.32
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.18

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 4.0213, variance: 17.8760
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [203 217 240]
[Step 2b] Goal for this run: detect_blue
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9411764705882353
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 460, Initial round: False
[Neuron (0,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (1,)] ACTIVATED! Membrane potential: 1.0659 > Threshold: 0.3000
[Neuron (0,)] Membrane potential: 0.4029, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4412, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.2255 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.23 active=False
[Neuron (3,)] Membrane potential: -0.1395, Threshold: 0.3000
[Neuron] (1,) membrane_potential=1.07 active=True
[Neuron (2,)] Membrane potential: 1.0733, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,)] (target_specialty=2, min_dist=0.81)
[Neuron (3,)] Membrane potential: 1.2895, Threshold: 0.3000
[Neuron (3,)] ACTIVATED! Membrane potential: 1.8895 > Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.5462, Threshold: 0.3000
[Neuron (4,)] Membrane potential: -0.1857, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 0.7934, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.4282, Threshold: 0.3000
[Neuron] (3,) membrane_potential=1.89 active=True
[Neuron (4,)] Membrane potential: 1.0017, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.0853, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 0.8659, Threshold: 0.3000
[Neuron (6,)] ACTIVATED! Membrane potential: 1.6659 > Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.1836, Threshold: 0.3000
[Neuron (7,)] Membrane potential: -0.4384, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 1.0310, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1675, Threshold: 0.3000
[Neuron] (6,) membrane_potential=1.67 active=True
[Neuron (7,)] Membrane potential: 0.6926, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.1718, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 1: specialty=9.7000, status=ACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 2: specialty=18.7000, status=ACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 3: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
    Neuron 4: specialty=9.7000, status=INACTIVE, guess=blue, correct?=yes, winner=False
    Neuron 5: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 6: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 7: specialty=27.4000, status=ACTIVE, guess=blue, correct?=yes, winner=True
    Neuron 8: specialty=1.0000, status=INACTIVE, guess=green, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 9.80 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 12.70 -> 6.50
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 1 messages (MP=1.79, winner=False)
[Neuron] (2,) sent 2 messages (MP=1.55, winner=False)
[Neuron] (4,) sent 2 messages (MP=1.53, winner=False)
[Neuron] (5,) sent 1 messages (MP=1.93, winner=True)
[Neuron] (6,) sent 1 messages (MP=1.67, winner=False)
[Neuron] (8,) sent 1 messages (MP=1.67, winner=False)
  Total messages sent: 9
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.2906, Threshold: 0.3000
[Neuron (1,)] Membrane potential: 1.6499, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 1.4225, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.7789, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8672, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.3757->1.3937 [+0.0180]
  Weight (before->after) [Δ]: 0.7918->0.6730 [-0.1188]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0680
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 8.3444->8.3313 [-0.0131]
  Weight (before->after) [Δ]: 0.4680->0.5382 [+0.0702]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0631
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 10.0000->9.9778 [-0.0222]
  Weight (before->after) [Δ]: 1.1030->1.0000 [-0.1030]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0722
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.1008->1.0000 [-1.1008]
  Weight (before->after) [Δ]: 0.3032->0.3000 [-0.0032]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0783
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 9.1225->1.0000 [-8.1225]
  Weight (before->after) [Δ]: 0.4831->0.5555 [+0.0725]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0477
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.1496->1.0000 [-0.1496]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0132
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3368->0.3000 [-0.0368]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0053
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 27.4000->10.0000 [-17.4000]
  Weight (before->after) [Δ]: 1.1769->1.0000 [-0.1769]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0837
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 1.0000->1.0000 [+0.0000]
  Weight (before->after) [Δ]: 0.3642->0.3095 [-0.0546]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0087
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 3/3 neurons (100.0%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.39', '8.33', '9.98']
  Target: red (specialty 2.5) | Current Mean: 6.57
  Labels: ['Specialty_1.39', 'Specialty_8.33', 'Specialty_9.98']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.39 | MP=2.29
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=8.33 | MP=2.15
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=9.98 | MP=1.76

Cluster C1:
  Active: 1/3 neurons (33.3%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['1.00', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.89
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.53
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=2.18

Cluster C2:
  Active: 1/3 neurons (33.3%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '10.00', '1.00']
  Target: blue (specialty 10.0) | Current Mean: 4.00
  Labels: ['Specialty_1.00', 'Specialty_10.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.67
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=10.00 | MP=1.12
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=1.67

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 4.063808198081901, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 4.8559, variance: 18.0771
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!

[INFO] Capturing output to training_logs/training_run.txt
Starting green detection experiment...
[Step 1] Loading or initializing neurons and monitor...
Loaded neuron state from network_state.pkl
  Loaded 9 neurons from state.
[Controller] Initialized cluster specializations: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1b] Created controller with cluster assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
[Step 1c] Monitor tracking 9 neurons, 3 clusters, 1 controllers
[Step 2] Loading and processing input pixel...
  Input pixel: [247  26  15]
[Step 2b] Goal for this run: detect_green
[Step 4] Setting goal for all neurons...
[Step 5] Calculating input signal from selected color component...
  Input signal strength: 0.9686274509803922
[Step 6] Evaluating activation for all clusters and applying error-driven feedback...
  Run count: 462, Initial round: False
[Neuron (0,)] Membrane potential: 0.8911, Threshold: 0.3000
[Neuron (0,)] ACTIVATED! Membrane potential: 1.8911 > Threshold: 0.3000
[Neuron (1,)] Membrane potential: -0.2399, Threshold: 0.3000
[Neuron (2,)] Membrane potential: -0.4771, Threshold: 0.3000
[Neuron (2,)] NOT ACTIVATED. Membrane potential: 0.0229 <= Threshold: 0.3000
[Neuron] (2,) membrane_potential=0.02 active=False
[Neuron] (0,) membrane_potential=1.89 active=True
[Neuron (1,)] Membrane potential: 1.2837, Threshold: 0.3000
[Neuron (2,)] Membrane potential: 0.9122, Threshold: 0.3000
[Cluster C0] Winner(s): [(0,)] (target_specialty=2, min_dist=0.61)
[Neuron (3,)] Membrane potential: 0.8911, Threshold: 0.3000
[Neuron (4,)] Membrane potential: 0.8911, Threshold: 0.3000
[Neuron (4,)] ACTIVATED! Membrane potential: 1.2911 > Threshold: 0.3000
[Neuron (3,)] Membrane potential: 0.6669, Threshold: 0.3000
[Neuron (5,)] Membrane potential: -0.4758, Threshold: 0.3000
[Neuron (5,)] NOT ACTIVATED. Membrane potential: 0.1242 <= Threshold: 0.3000
[Neuron] (5,) membrane_potential=0.12 active=False
[Neuron (2,)] Membrane potential: 0.3621, Threshold: 0.3000
[Neuron (6,)] Membrane potential: -0.1412, Threshold: 0.3000
[Neuron] (4,) membrane_potential=1.29 active=True
[Neuron (5,)] Membrane potential: 1.0054, Threshold: 0.3000
[Cluster C1] Winner(s): [(5,)] (target_specialty=6, min_dist=4.00)
[Neuron (6,)] Membrane potential: 1.2213, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8911, Threshold: 0.3000
[Neuron (7,)] ACTIVATED! Membrane potential: 1.1411 > Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.4424, Threshold: 0.3000
[Neuron (8,)] Membrane potential: -0.1403, Threshold: 0.3000
[Neuron (8,)] ACTIVATED! Membrane potential: 0.3597 > Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.5727, Threshold: 0.3000
[Neuron (6,)] Membrane potential: 1.7992, Threshold: 0.3000
[Neuron] (8,) membrane_potential=0.36 active=True
[Neuron (5,)] Membrane potential: 0.4493, Threshold: 0.3000
[Neuron] (7,) membrane_potential=0.97 active=True
[Neuron (8,)] Membrane potential: 1.2221, Threshold: 0.3000
[Cluster C2] Winner(s): [(7,)] (target_specialty=10, min_dist=0.00)
[Controller] Winning cluster(s): ['C0', 'C1', 'C2'] (activation=1)
    Neuron 0: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=True
    Neuron 1: specialty=8.3313, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 2: specialty=9.9778, status=INACTIVE, guess=blue, correct?=no, winner=False
    Neuron 3: specialty=1.0000, status=ACTIVE, guess=blue, correct?=no, winner=False
    Neuron 4: specialty=1.0000, status=INACTIVE, guess=red, correct?=no, winner=False
    Neuron 5: specialty=27.4000, status=ACTIVE, guess=green, correct?=yes, winner=True
    Neuron 6: specialty=9.7000, status=INACTIVE, guess=green, correct?=yes, winner=False
    Neuron 7: specialty=5.6500, status=ACTIVE, guess=red, correct?=no, winner=True
    Neuron 8: specialty=1.0000, status=ACTIVE, guess=red, correct?=no, winner=False
[Controller] Ensuring complementary specialization...
[Controller] Applied corrective guidance to cluster C0 (red): 6.44 -> 2.50
[Controller] Applied corrective guidance to cluster C1 (green): 9.80 -> 6.50
[Controller] Applied corrective guidance to cluster C2 (blue): 5.45 -> 10.00
[Step 7] Neurons sending messages to neighbors...
[Neuron] (1,) sent 1 messages (MP=1.95, winner=False)
[Neuron] (2,) sent 1 messages (MP=1.36, winner=False)
[Neuron] (3,) sent 1 messages (MP=1.67, winner=False)
[Neuron] (4,) sent 1 messages (MP=1.29, winner=False)
[Neuron] (5,) sent 1 messages (MP=1.45, winner=True)
[Neuron] (6,) sent 1 messages (MP=2.55, winner=False)
  Total messages sent: 7
[Step 8] Neuron learning step (with learning noise)... [REWRITE START]
[Neuron (0,)] Membrane potential: 1.7398, Threshold: 0.3000
[Neuron (3,)] Membrane potential: 1.5335, Threshold: 0.3000
[Neuron (5,)] Membrane potential: 1.3333, Threshold: 0.3000
[Neuron (7,)] Membrane potential: 0.8948, Threshold: 0.3000
[Neuron (8,)] Membrane potential: 1.1243, Threshold: 0.3000

Neuron Change Summary Table: [REWRITE]
Idx:   0
  Specialty (before->after) [Δ]: 1.2132->1.2452 [+0.0319]
  Weight (before->after) [Δ]: 0.5881->0.4999 [-0.0882]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0819
----------------------------------------
Idx:   1
  Specialty (before->after) [Δ]: 7.1443->1.0000 [-6.1443]
  Weight (before->after) [Δ]: 0.5216->0.4434 [-0.0782]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0990
----------------------------------------
Idx:   2
  Specialty (before->after) [Δ]: 8.4827->1.0000 [-7.4827]
  Weight (before->after) [Δ]: 1.0372->0.8817 [-0.1556]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0959
----------------------------------------
Idx:   3
  Specialty (before->after) [Δ]: 2.0378->2.0169 [-0.0210]
  Weight (before->after) [Δ]: 0.3326->0.3000 [-0.0326]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0290
----------------------------------------
Idx:   4
  Specialty (before->after) [Δ]: 2.0650->1.0000 [-1.0650]
  Weight (before->after) [Δ]: 0.5716->0.4858 [-0.0857]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: -0.0026
----------------------------------------
Idx:   5
  Specialty (before->after) [Δ]: 10.0000->10.0000 [+0.0000]
  Weight (before->after) [Δ]: 1.2773->1.0000 [-0.2773]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: +0.0126
----------------------------------------
Idx:   6
  Specialty (before->after) [Δ]: 9.7261->1.0000 [-8.7261]
  Weight (before->after) [Δ]: 0.3529->0.4058 [+0.0529]
  Active (before->after) [Δ]: False->False [+0]
  Iteration:   0
  Learning noise: +0.0828
----------------------------------------
Idx:   7
  Specialty (before->after) [Δ]: 6.5291->6.4176 [-0.1115]
  Weight (before->after) [Δ]: 0.9596->0.8156 [-0.1439]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0615
----------------------------------------
Idx:   8
  Specialty (before->after) [Δ]: 2.8559->2.7712 [-0.0847]
  Weight (before->after) [Δ]: 0.3050->0.3000 [-0.0050]
  Active (before->after) [Δ]:  True-> True [+0]
  Iteration:   0
  Learning noise: -0.0347
----------------------------------------
[Step 8] Neuron learning step (with learning noise)... [REWRITE END]
[Step 9] Logging activity and generating summary...

=== Ensemble Activity Summary ===
Overall Activity: 5/9 neurons active (55.6%)
Controller Assignments: {'C0': 'red', 'C1': 'green', 'C2': 'blue'}
Target Specialties: {'red': 2.5, 'green': 6.5, 'blue': 10.0}

Cluster C0:
  Active: 1/3 neurons (33.3%)
  Positions: [(0,), (1,), (2,)]
  Specialties: ['1.25', '1.00', '1.00']
  Target: red (specialty 2.5) | Current Mean: 1.08
  Labels: ['Specialty_1.25', 'Specialty_1.00', 'Specialty_1.00']
  --- Neuron States ---
    Neuron (0,): Winner=True | Goal:✗ | Target:2.5 | Specialty=1.25 | MP=1.74
    Neuron (1,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.95
    Neuron (2,): Winner=False | Goal:✗ | Target:2.5 | Specialty=1.00 | MP=1.36

Cluster C1:
  Active: 2/3 neurons (66.7%)
  Positions: [(3,), (4,), (5,)]
  Specialties: ['2.02', '1.00', '10.00']
  Target: green (specialty 6.5) | Current Mean: 4.34
  Labels: ['Specialty_2.02', 'Specialty_1.00', 'Specialty_10.00']
  --- Neuron States ---
    Neuron (3,): Winner=False | Goal:✗ | Target:6.5 | Specialty=2.02 | MP=2.03
    Neuron (4,): Winner=False | Goal:✗ | Target:6.5 | Specialty=1.00 | MP=1.29
    Neuron (5,): Winner=True | Goal:✗ | Target:6.5 | Specialty=10.00 | MP=1.83

Cluster C2:
  Active: 2/3 neurons (66.7%)
  Positions: [(6,), (7,), (8,)]
  Specialties: ['1.00', '6.42', '2.77']
  Target: blue (specialty 10.0) | Current Mean: 3.40
  Labels: ['Specialty_1.00', 'Specialty_6.42', 'Specialty_2.77']
  --- Neuron States ---
    Neuron (6,): Winner=False | Goal:✗ | Target:10.0 | Specialty=1.00 | MP=2.55
    Neuron (7,): Winner=True | Goal:✗ | Target:10.0 | Specialty=6.42 | MP=0.89
    Neuron (8,): Winner=False | Goal:✗ | Target:10.0 | Specialty=2.77 | MP=1.12

[Step 9c] Controller state: {'controller_id': 'TrainController', 'num_clusters': 3, 'clusters': [{'cluster_id': 'C0', 'specialty': 6.567610059402977, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.0, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 4.0, 'num_neurons': 3}]}
[Step 9a] Specialty mean: 2.9390, variance: 8.9717
[Step 9b] Specialty values saved to specialties_over_time.csv
[Step 10] Clearing previous round state...
[Step 11] Saving state for next run...
Neuron state saved to network_state.pkl
Monitor state saved to monitor_state.pkl
[Step 11] Appending summary to log file...
Log appended to logs/2025-07-13.json
Experiment completed successfully!
Test 1: Pixel=[255   0   0] | True=red | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['green'], 'correct': False}, 'C1': {'winner_outputs': ['blue'], 'correct': False}, 'C2': {'winner_outputs': ['red'], 'correct': True}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 2: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['green'], 'correct': True}, 'C1': {'winner_outputs': ['red'], 'correct': False}, 'C2': {'winner_outputs': ['red'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 3: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['blue'], 'correct': False}, 'C1': {'winner_outputs': ['red'], 'correct': False}, 'C2': {'winner_outputs': ['red'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 4: Pixel=[  0   0 255] | True=blue | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['blue'], 'correct': True}, 'C1': {'winner_outputs': ['blue'], 'correct': True}, 'C2': {'winner_outputs': ['red'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 5: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['green'], 'correct': True}, 'C1': {'winner_outputs': ['blue'], 'correct': False}, 'C2': {'winner_outputs': ['blue'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 6: Pixel=[  0   0 255] | True=blue | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['red'], 'correct': False}, 'C1': {'winner_outputs': ['blue'], 'correct': True}, 'C2': {'winner_outputs': ['green'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 7: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['green'], 'correct': True}, 'C1': {'winner_outputs': ['red'], 'correct': False}, 'C2': {'winner_outputs': ['red'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 8: Pixel=[255   0   0] | True=red | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0'], 'activations': {'C0': 2, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['red', 'red'], 'correct': True}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 9: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['red'], 'correct': False}, 'C1': {'winner_outputs': ['red'], 'correct': False}, 'C2': {'winner_outputs': ['blue'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}
Test 10: Pixel=[  0 255   0] | True=green | Predicted=red | Activations={'red': 0, 'green': 0, 'blue': 0}
  Controller: {'controller_id': 'TestController', 'winning_clusters': ['C0', 'C1', 'C2'], 'activations': {'C0': 1, 'C1': 1, 'C2': 1}, 'feedback': {'C0': {'winner_outputs': ['green'], 'correct': True}, 'C1': {'winner_outputs': ['blue'], 'correct': False}, 'C2': {'winner_outputs': ['blue'], 'correct': False}}, 'cluster_states': [{'cluster_id': 'C0', 'specialty': 1.0817171337490592, 'num_neurons': 3}, {'cluster_id': 'C1', 'specialty': 4.3389592281216665, 'num_neurons': 3}, {'cluster_id': 'C2', 'specialty': 3.396277655144558, 'num_neurons': 3}]}

Accuracy: 2/10 correct (20.0%)
